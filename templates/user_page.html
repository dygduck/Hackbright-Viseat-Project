{% extends 'base.html' %}

{% block title %}Logged In{% endblock %}

{% block content %}
<h1>It is easy to Viseat!</h1>
<p>Hi {{ user.fname }}, would you like to make some trips?</p><br>
<div>
{% if trips_dict == {} %}
    <p>Hey, you haven't planned any trips yet!</p>
{% else %}
    <ul>
        {% for arrival_date, trip in trips_dict.iteritems()|sort %}
        <li>{{ arrival_date }} - {{ trip.departure_date }} - {{ trip.city_name }}</li>
        <ul>
            {% for date, meals in trip.dates.iteritems()|sort %}
            <li>{{ date }}
                <ul>
                    {% if "breakfast" in meals %}
                        <li>breakfast:<a href="{{ meals.breakfast.url }}"> {{ meals.breakfast.name }}</a></li>
                    {% endif %}
                    {% if "lunch" in meals %}
                        <li>lunch:<a href="{{ meals.lunch.url }}"> {{ meals.lunch.name }}</a></li>
                    {% endif %}
                    {% if "dinner" in meals %}
                        <li>dinner:<a href="{{ meals.dinner.url }}"> {{ meals.dinner.name }}</a></li>
                    {% endif %}
                </ul>
            </li>
            {% endfor %}
        </ul>
        {% endfor %}
    </ul>
{% endif %}
</div>

<form method="GET" action="/places">
    <div>
        <label>City</label>
        <select name="city_id" required>
            {% for city in cities %}
            <option value="{{city.city_id}}">{{city.city_name}}</option>
            {% endfor %}
        </select>
    </div>
    <div>
        <label>Arrival Date</label>
        <input type="datetime-local" name="arrival_date" required>
    </div>
    <div>
        <label>Departure Date</label>
        <input type="datetime-local" name="departure_date" required>
    </div>
    <input type="submit" value="Search!">
</form>
<form action="/logout" method="GET">
      <input type="submit" value="Logout">
</form>

{% endblock %}




